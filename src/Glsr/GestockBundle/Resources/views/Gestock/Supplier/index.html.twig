{# src\Glsr\GestockBundle\Resources\views\Gestock\Supplier\index.html.twig #}

{% extends "GlsrGestockBundle::layout.html.twig" %}

{% block title %}
    {{ 'glsr.gestock.supplier.title'|trans }} - {{ parent() }}
{% endblock %}

{% block body_title %}
    {{ 'glsr.gestock.supplier.list'|trans }}
{% endblock %}

{% block glstock_body %}

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th width="20%">{{ 'glsr.gestock.supplier.name'|trans }}</th>
                <th width="15%">
                    <i class="glyphicon glyphicon-home"></i>
                    {{ 'glsr.gestock.adress'|trans }}
                </th>
                <th width="10%">
                    <i class="glyphicon glyphicon-phone-alt"></i>
                    {{ 'glsr.gestock.phone'|trans }}
                </th>
                <th width="15%">
                    <i class="glyphicon glyphicon-user"></i>
                    {{ 'glsr.gestock.contact'|trans }}
                </th>
                <th width="15%">
                    <i class="glyphicon glyphicon-inbox"></i>
                    {{ 'glsr.gestock.settings.diverse.familylog'|trans }}
                </th>
                <th width="15%">
                    <i class="glyphicon glyphicon-inbox"></i>
                    {{ 'glsr.gestock.settings.diverse.subfamily'|trans }}
                </th>
                <th width="10%">
                    <i class="glyphicon glyphicon-cog"></i>
                    {{ 'glsr.gestock.action'|trans }}
                </th>
            </tr>
        </thead>
        <tbody>
        {% for supplier in suppliers %}
            <tr>
                <td>
                    <a href="{{ path('glstock_suppli_show', {'name': supplier.name}) }}">
                        {{ supplier.name }}
                    </a>
                </td>
                <td>
                    {{ supplier.address }}<br />
                    {{ supplier.zipcode }} {{ supplier.town }}
                </td>
                <td>{{ phone_number_format(supplier.phone, 'NATIONAL') }}</td>
                <td>{{ supplier.contact }}</td>
                <td>{{ supplier.familyLog }}</td>
                <td>{{ supplier.subFamilyLog }}</td>
                <td>
                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('glstock_suppli_edit', {'name': supplier.name}) }}" class="btn btn-default" title="{{ 'glsr.gestock.supplier.edit.title_button'|trans }}" role="button">
                            <i class="glyphicon glyphicon-pencil"></i>
                        </a>&nbsp;
                        <a href="{{ path('glstock_suppli_del', {'id': supplier.id}) }}" class="btn btn-default" title="{{ 'glsr.gestock.supplier.delete.title_button'|trans }}" role="button">
                            <i class="glyphicon glyphicon-trash"></i>
                        </a>
                    {% endif %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="12">{{ 'glsr.gestock.supplier.none'|trans }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <section class="col-md-6">
        <p>
            <a href="{{ path('glstock_home') }}" class="btn btn-default" role="button">
                 <i class="glyphicon glyphicon-chevron-left"></i>
                 {{ 'glsr.gestock.home.return'|trans }}
             </a>&nbsp;
            {% if is_granted('ROLE_ADMIN') %}
                <a href="{{ path('glstock_suppli_add') }}" class="btn btn-default" role="button">
                    <i class="glyphicon glyphicon-edit"></i>
                    {{ 'glsr.gestock.supplier.create.title_button'|trans }}
                </a>
            {% endif %}
        </p>
    </section>
    <section class="col-md-6">
    {# S'il y a plus d'une page, on affiche la liste des pages #}
    {% if suppliers is defined %}
        {% if nb_page > 1 %}
            <nav class="text-center">
                <ul class="pagination">
                    {# On utilise la fonction range(a, b) qui cr√©e un tableau de valeurs entre a et b #}
                    <li {% if page == 1 %}class="disabled"{% endif %}><a href="{{ path('glstock_suppli_list', {'page': 1}) }}">&laquo;</a></li>
                    {% for p in range(1, nb_page) %}
                        <li {% if p == page %} class="active" {% endif %}>
                            <a href="{{ path('glstock_suppli_list', {'page': p}) }}">{{ p }}</a>
                        </li>
                    {% endfor %}
                    <li {% if page == nb_page %}class="disabled"{% endif %}><a href="{{ path('glstock_suppli_list', {'page': nb_page}) }}">&raquo;</a></li>
                </ul>
            </nav>
        {% endif %}
    {% endif %}
    </section>
{% endblock %}
