{% extends "base.html.twig" %}

{% block title %}
    {{ '%entity% list'|trans({'%entity%': 'title'|trans({}, 'gs_orders')}, 'admin') }} - {{ parent() }}
{% endblock %}

{% block body_title %}
    <i class="fa fa-shopping-cart" aria-hidden="true"></i>
    {{ '%entity% list'|trans({'%entity%': 'title_short'|trans({}, 'gs_orders')}, 'admin') }}
{% endblock %}

{% block glstock_body %}
    <table class="table table-striped table-hover records_list">
        <thead>
            <tr>
                <th scope="col" class="col-md-1">{{ 'gestock.id'|trans }}</th>
                <th scope="col" class="col-md-1 text-center">{{ 'title'|trans({}, 'gs_suppliers') }}</th>
                <th scope="col" class="col-md-3 text-center">
                    <i class="fa fa-calendar"></i> {{ 'form.order_date'|trans({}, 'gs_orders') }}
                </th>
                <th scope="col" class="col-md-3 text-center">
                    <i class="fa fa-calendar"></i> {{ 'form.deliv_date'|trans({}, 'gs_orders') }}
                </th>
                <th scope="col" class="col-md-1 text-center">{{ 'gestock.amount'|trans }}</th>
                <th scope="col" class="col-md-1 text-center">{{ 'settings.vat'|trans({}, 'gs_orders') }}</th>
                <th scope="col" class="col-md-2 text-center">{{ 'Actions'|trans({}, 'admin') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for orders in paginator %}
                <tr>
                    <td><a href="{{ path('orders_show', {id: orders.id}) }}">{{ orders.id }}</a></td>
                    <td><a href="{{ path('supplier_show', {slug: orders.supplier.slug}) }}">{{ orders.supplier }}</a></td>
                    <td class="text-center">
                        {% if orders.orderdate %}{{ orders.orderdate|localizeddate('full', 'none') }}{% endif %}
                    </td>
                    <td class="text-center">
                        {% if orders.delivdate %}{{ orders.delivdate|localizeddate('full', 'none') }}{% endif %}
                    </td>
                    <td  class="text-right">{{ orders.amount|localizedcurrency('EUR') }}</td>
                    <td  class="text-right">{{ orders.tva|localizedcurrency('EUR') }}</td>
                    <td class="text-center">
                        <div class="btn-group">
                            <a class="btn btn-default btn-xs btn-show" href="{{ path('orders_show', {id: orders.id}) }}">
                                {{ 'show'|trans({}, 'admin') }}
                            </a>
                            <a class="btn btn-info btn-edit btn-xs" href="{{ path('orders_edit', {id: orders.id}) }}">
                                {{ 'edit'|trans({}, 'admin') }}
                            </a>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {{ knp_pagination_render(paginator) }}
    
    <div class="btn-group">
        {% include 'homeButton.html.twig' %}
        {% if is_granted('ROLE_ADMIN') %}
        <button class="btn btn-info btn-create" type="button" data-toggle="modal" data-target="#create_confirm">
            {{ 'Create a new entry'|trans({}, 'admin') }}
        </button>
        {% endif %}
    </div>

    {% if is_granted('ROLE_ADMIN') %}
        {% include 'AppBundle:Orders:createform.html.twig' %}
    {% endif %}

{% endblock %}
