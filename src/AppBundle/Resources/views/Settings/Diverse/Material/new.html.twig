{% extends "base.html.twig" %}

{% form_theme form 'AppBundle:Form:bootstrap_3_horizontal_layout.html.twig' %}

{% block title %}
    {{ '%entity% creation'|trans({'%entity%': 'menu.material'|trans({}, 'messages')}, 'admin') }} - {{ parent() }}
{% endblock %}

{% block body_title %}
    <i class="fa fa-pie-chart" aria-hidden="true"></i>
    {{ '%entity% creation'|trans({'%entity%': 'menu.material'|trans({}, 'messages')}, 'admin') }}
{% endblock %}

{% block glstock_body %}

    {% include 'AppBundle:Settings/Diverse/Material:form.html.twig' %}

    <div class="btn-group record_actions">
        {% include 'homeButton.html.twig' %}
        <a class="btn btn-info btn-list" href="{{ path('material') }}">
            {{ 'gestock.return_list'|trans }}
        </a>
    </div>

    <script type="text/javascript">
        function isMultiple(id){
            var multiple = 0;
            var articlesCount = {{ form.articles|length }} + 1;

            var unit = $('#material_articles_unit_' + id).val();
            $('#{{ form.unitWorking.vars.id }}').val(unit);

            for (var iter = 1; iter <= articlesCount; iter++) {
                if ($('#{{ form.articles.vars.id }}_' + iter).is(':checked')) {
                    multiple++;
                }
            }

            if (multiple > 1) {
                $('#{{ form.multiple.vars.id }}').prop('checked', true);
            } else {
                $('#{{ form.multiple.vars.id }}').prop('checked', false);
            }
        }
    </script>
{% endblock %}
